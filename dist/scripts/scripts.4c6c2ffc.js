"use strict";angular.module("softwareEngineeringTeamApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","pouchdb"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("softwareEngineeringTeamApp").controller("MainCtrl",["$scope","pDB","pouchDB",function(a,b,c){var d=c("http://localhost:5984/todos");b.sync(d,{live:!0,retry:!0}).on("change",function(c){console.log(c),b.allDocs({include_docs:!0},function(b,c){a.$apply(function(){a.todos=[],c.rows.forEach(function(b){a.todos.push(b.doc)})})})}).on("paused",function(a){console.log(a)}).on("active",function(a){console.log(a)}).on("complete",function(a){console.log(a)}).on("error",function(a){console.log(a)}),a.todos=[],a.addTodo=function(){var c={_id:Math.uuid,text:a.todoText,done:!1};a.todos.push(c),a.todoText="",b.post(c,function(a,b){a&&console.log(a),c._id=b.id,c._rev=b.rev})},a.removeDone=function(){var c=a.todos;a.todos=[],angular.forEach(c,function(c){c.done?b.remove(c):a.todos.push(c)})},a.updateTodo=function(a){b.put(a)},a.remaining=function(){var b=0;return angular.forEach(a.todos,function(a){b+=a.done?0:1}),b}}]),angular.module("softwareEngineeringTeamApp").factory("pDB",["pouchDB",function(a){var b=a("db");return b}]),angular.module("softwareEngineeringTeamApp").run(["$templateCache",function(a){a.put("views/main.html",'<h1>Todo Pouch</h1> <span>{{remaining()}} of {{todos.length}} remaining</span> [<a ng-href="" ng-click="removeDone()">Remove done</a>] <ul> <li ng-repeat="todo in todos"> <input type="checkbox" ng-model="todo.done" ng-click="updateTodo(todo)"> <span ng-class="{done: todo.done}">{{todo.text}}</span> </li> </ul> <form ng-submit="addTodo()"> <input type="text" ng-model="todoText" size="30" placeholder="add new todo here"> <input class="button" type="submit" value="add"> </form>')}]);